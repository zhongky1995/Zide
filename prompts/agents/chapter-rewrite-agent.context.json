{
  "agent_id": "chapter-rewrite-agent",
  "agent_name": "Chapter Rewrite Agent",
  "workflow_stage": "chapter-generation",
  "stage_goal": "以替换模式重构章节表达，提升逻辑清晰度",
  "target_users": [
    "需要整章改写提质的用户"
  ],
  "dependencies": [
    "RealLLMAdapter.getSystemPrompt",
    "ChapterIntent.REWRITE",
    "GenerateContentUseCase replace mode"
  ],
  "input_contract": [
    {
      "field": "chapter.content",
      "type": "string",
      "constraints": "建议非空"
    },
    {
      "field": "chapter.target",
      "type": "string",
      "constraints": "可选"
    },
    {
      "field": "context.glossary",
      "type": "string",
      "constraints": "可选"
    },
    {
      "field": "intent",
      "type": "enum",
      "constraints": "必须为 rewrite"
    }
  ],
  "output_contract": {
    "format": "markdown-body",
    "required_sections": [
      "full_chapter_content"
    ],
    "limits": [
      "长度建议原文 80%-120%",
      "禁止只返回局部片段",
      "禁止改动核心立场"
    ]
  },
  "risk_notes": [
    "重写失真导致观点偏移",
    "替换不完整导致正文缺失"
  ],
  "assumptions": [
    "replace 写入由 usecase 负责"
  ],
  "complexity": {
    "scope": 2,
    "dependency": 2,
    "risk": 3,
    "ambiguity": 1,
    "total": 8,
    "mode": "lean"
  }
}
